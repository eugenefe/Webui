<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui">

  <h:form id="portTreeForm">

    <p:accordionPanel value="#{messages.portfolio}" multiple="true">
      <p:tab title="#{messages.hierarchy}">
         <p:growl id="messages" showDetail="true" />  

        <p:contextMenu for="portfolioTree">
          <p:menuitem value="View Details" onclick="portDialog.show()"
            icon="ui-icon-search" />
           <p:menuitem value="Add New..." update="messages" actionListener="#{portfolioTreeBean.displaySelectedSingle}"
            icon="ui-icon-circle-plus" /> 
          <p:menuitem value="Delete" actionListener="#{portfolioTree.deleteNode}" icon="ui-icon-close" disabled="true" />
        </p:contextMenu>

        <p:tree id="portfolioTree" value="#{portfolioRoot}" var="node" 
                selection="#{portfolioTreeBean.selectedNode}"   selectionMode="single">

          <p:ajax event="select" listener="#{portfolioTableBean.onNodeSelect}" update= "@(form)" />

          <p:treeNode expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed">
            <h:outputText value="#{node.name}" />
          </p:treeNode>

        </p:tree>
      </p:tab>

      <p:tab title="#{messages.userDefined}" disabled="#{not identity.loggedIn}">
        <p:commandButton value="AAA222" />
      </p:tab>
      <p:tab title="#{messages.virtual}" disabled="#{not identity.loggedIn}">
        <f:facet name="asdf" />
        <p:menubar>
          <p:menuitem value="aa" icon="ui-icon-disk">
          </p:menuitem>
        </p:menubar>
        <p:commandButton value="AAA" />
        
      </p:tab>
    </p:accordionPanel>
    
    <ui:include src="/fragment/portfolioDetailDialog.xhtml" />
  </h:form>

</ui:composition>